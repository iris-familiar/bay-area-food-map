# ğŸ”§ ETLä¿®å¤æ–¹æ¡ˆè®¾è®¡

## é—®é¢˜è¯Šæ–­

### å‘ç°çš„é—®é¢˜
1. **merge.js è·¯å¾„é…ç½®é”™è¯¯**
   - æœŸæœ›: `data/golden/current/restaurant_database.json`
   - å®é™…: `data/current/restaurant_database.json`
   - ç»“æœ: è¯»å–äº†é”™è¯¯/æ—§çš„æ•°æ®

2. **merge.js æœªæ­£ç¡®åˆå¹¶æ–°æ•°æ®**
   - è¾“å…¥: 80å®¶é¤å… (79 + 1æ–°)
   - è¾“å‡º: 79å®¶é¤å… (æ–°æ•°æ®ä¸¢å¤±)
   - åŸå› : mergeé€»è¾‘å¯èƒ½åªæ›´æ–°ç°æœ‰è®°å½•ï¼Œä¸æ·»åŠ æ–°è®°å½•

3. **export_to_serving.js å¯¼å‡ºè·¯å¾„é”™è¯¯**
   - å®é™…å¯¼å‡ºåˆ°: `src/data/serving_data.json`
   - åº”è¯¥å¯¼å‡ºåˆ°: `data/serving/serving_data.json`

## ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤1: ç»Ÿä¸€æ•°æ®è·¯å¾„æ¶æ„
```
data/
â”œâ”€â”€ raw/              # åŸå§‹çˆ¬å–æ•°æ®
â”œâ”€â”€ bronze/           # åˆæ­¥æ¸…æ´—
â”œâ”€â”€ silver/           # æ ‡å‡†åŒ–å¤„ç†
â”œâ”€â”€ gold/             # é»„é‡‘æ•°æ®é›† (single source of truth)
â”‚   â””â”€â”€ restaurant_database.json
â””â”€â”€ serving/          # å‰ç«¯æœåŠ¡æ•°æ®
    â”œâ”€â”€ serving_data.json
    â”œâ”€â”€ serving_data_light.json
    â””â”€â”€ search_index.json
```

### ä¿®å¤2: ä¿®æ”¹merge.js
- ä¿®å¤goldenè·¯å¾„æŒ‡å‘æ­£ç¡®ä½ç½®
- ä¿®å¤mergeé€»è¾‘ï¼Œç¡®ä¿æ–°è®°å½•è¢«æ·»åŠ 
- æ·»åŠ è¯¦ç»†çš„mergeæ—¥å¿—

### ä¿®å¤3: ä¿®æ”¹export_to_serving.js
- ä¿®å¤å¯¼å‡ºè·¯å¾„åˆ° `data/serving/`
- æ·»åŠ è·¯å¾„éªŒè¯

### ä¿®å¤4: åˆ›å»ºå®Œæ•´çš„æ•°æ®æµè„šæœ¬
- `daily_pipeline.sh`: å®Œæ•´çš„æ¯æ—¥æ•°æ®å¤„ç†æµç¨‹
- åŒ…å«: å¤‡ä»½ â†’ æ‹‰å–æ–°æ•°æ® â†’ é¢„å¤„ç† â†’ åˆå¹¶ â†’ å¯¼å‡º â†’ éªŒè¯

## é¢„æœŸç»“æœ
1. æ–°æ•°æ®èƒ½æ­£ç¡®åˆå¹¶åˆ°ç°æœ‰æ•°æ®é›†
2. é¤å…æ€»æ•°ä»79 â†’ 80 (æ·»åŠ æ–°é¤å…)
3. å‰ç«¯èƒ½ç«‹å³çœ‹åˆ°æ›´æ–°åçš„æ•°æ®
4. æ‰€æœ‰æ­¥éª¤æœ‰æ—¥å¿—è®°å½•
5. å¤±è´¥æ—¶èƒ½è‡ªåŠ¨å›æ»š
