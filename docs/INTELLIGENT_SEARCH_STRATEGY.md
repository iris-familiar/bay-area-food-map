# 小红书数据获取 - 智能搜索策略 2.0

## 当前问题诊断

**低效模式**: 用宽泛关键词批量搜索
- ❌ 湾区美食 → 50%结果重复
- ❌ 湾区餐厅推荐 → 夹杂外卖广告、超市分享
- ❌ 覆盖率有限 → 只找到头部热门餐厅

**目标**: 用更少请求，获取更多高质量、低重复的数据

---

## 🎯 策略一：长尾关键词矩阵

**原理**: 具体场景+细分地域 = 精准高质量内容

### A. 场景化搜索 (高价值)
```
精准场景词:
- "湾区约会餐厅" → 高质量探店，环境+菜品详细评价
- "湾区生日聚餐" → 多人消费场景，价格信息丰富
- "湾区一人食" → 快速用餐，性价比讨论
- "湾区夜宵" → 特定时段，真实体验
- "湾区商务宴请" → 高端餐厅，详细服务评价
- "湾区家庭聚餐" → 适合带孩子，停车方便等实用信息
```

### B. 地域细分 (覆盖盲区)
```
从"南湾"细化到:
- "Cupertino Village餐厅" (具体商圈)
- "Santana Row美食" (热门街区)
- "Valley Fair附近吃什么" (地标周边)
- "Mountain View downtown" (市中心)
- "Fremont Warm Springs" (具体区域)

从"东湾"细化到:
- "Milpitas Great Mall附近"
- "Union City Decoto"
- "Newark新店"
```

### C. 特定需求 (高信息密度)
```
- "湾区川菜天花板" → 对比评测，多餐厅比较
- "湾区湘菜踩雷" → 负面评价，避坑信息
- "湾区火锅自助" → 价格敏感，性价比讨论
- "湾区早茶推荐" → 广东社区真实评价
- "湾区兰州拉面" → 细分品类，深度讨论
- "湾区奶茶探店" → 年轻用户，详细评分
```

---

## 🔁 策略二：递归发现机制

**原理**: 从已有帖子中发现新线索

### 步骤1: 提取评论区提及
```python
# 分析评论中的"XXX也不错"
patterns = [
    r"(.{2,8})[也还]不错",
    r"推荐(.{2,8})",
    r"(.{2,8})更好[吃点]",
    r"比起(.{2,8})",
    r"(.{2,8})怎么样",
]

# ⚠️ 关键：搜索时必须加"湾区"限定！
# "香锅大王也不错" → 搜索"湾区 香锅大王"
# "推荐你去塔里木" → 搜索"湾区 塔里木"
# "还是留湘好吃" → 搜索"湾区 留湘"
```

### 步骤1.5: 地理位置验证
```python
# 发现新餐厅后，必须验证是否在湾区
verification_keywords = [
    "湾区",
    "Bay Area", 
    "San Francisco",
    "Palo Alto",
    "Cupertino",
    "Fremont",
    "Milpitas",
    "Sunnyvale",
    "Mountain View",
    "San Jose",
    "东湾",
    "南湾",
    "半岛"
]

# 如果帖子不包含以上任何词，可能是其他城市的同名餐厅
```

### 步骤2: 用户追踪
```python
# 识别高质量作者特征:
# - 粉丝 > 500
# - 平均点赞 > 50
# - 内容垂直度高 (80%是美食)

# 追踪他们的:
# 1. 历史帖子 (过去半年的餐厅分享)
# 2. 收藏列表 (他们收藏的餐厅)
# 3. 关注列表 (同类美食博主)
```

### 步骤3: 话题关联
```python
# 如果一个帖子提到"香锅大王"
# 搜索该作者的"香锅大王"相关帖子
# 可能发现对比评测、多次光顾记录
```

---

## ⏰ 策略三：时间维度优化

**原理**: 最新内容价值最高

### 时间筛选
```bash
# 只搜最近一个月 (获取新鲜内容)
搜索词 + "最近"、"新店"、"刚开"

# 季节性内容
"湾区 summer dining"
"湾区情人节餐厅" (虽然过期，但可收藏明年用)

# 时效性强的
"湾区2025餐厅" → 年度盘点，全面
"湾区新店速递" → 最新开业
```

### 更新追踪
```python
# 定期搜索已有餐厅的更新评价
# 每两周搜索一次:
- "香锅大王 最近"
- "留湘 2025"
- 获取最新评价和变化
```

---

## 🎭 策略四：情感倾向搜索

**原理**: 不同情感词带来不同信息维度

### 正面评价 (推荐类)
```
- "湾区宝藏餐厅" → 小众精品
- "湾区必吃" → 打卡清单
- "湾区天花板" → 极致评价，详细对比
- "湾区yyds" → 年轻人推荐，真实体验
```

### 负面评价 (避坑类)
```
- "湾区踩雷" → 真实负面体验
- "湾区避雷" → 避坑指南
- "湾区难吃" → 反面教材
- "湾区餐厅 失望" → 服务/质量问题
```

### 中性讨论 (决策参考)
```
- "湾区餐厅对比" → 多餐厅横向评测
- "湾区湘菜选择" → 纠结求助，评论区干货多
- "湾区餐厅求推荐" → 评论区聚合大量建议
```

---

## 🔬 策略五：深度挖掘单帖

**原理**: 一个高质量帖子胜过10个水帖

### 识别高质量帖子
```python
质量标准:
- 评论数 > 20 (有讨论度)
- 收藏数 > 点赞数 (实用价值高)
- 作者有多个餐厅帖子 (专业度高)
- 帖子内提到3+个餐厅 (对比评测)
```

### 深度处理
```python
# 对高质量帖子:
# 1. 提取所有评论中的餐厅提及
# 2. 提取价格信息
# 3. 提取推荐菜品
# 4. 记录用户ID，追踪其其他帖子
# 5. 记录提及的餐厅，作为新搜索词
```

---

## 🤖 策略六：智能搜索调度

**原理**: 优先级排序，先搜高价值词

### 优先级分级
```python
priority_1 = [
    # 最高价值：具体场景+地域
    "Cupertino约会餐厅",
    "Palo Alto商务宴请", 
    "Fremont家庭聚餐",
    "湾区踩雷避雷",
]

priority_2 = [
    # 高价值：细分品类+地域
    "湾区川菜天花板",
    "湾区早茶推荐",
    "湾区火锅自助",
    "Milpitas新店",
]

priority_3 = [
    # 中等价值：宽泛但有场景
    "湾区宝藏餐厅",
    "湾区一人食",
    "湾区夜宵",
]

priority_4 = [
    # 基础覆盖
    "湾区美食",
    "湾区餐厅推荐",
]
```

### 动态调整
```python
# 如果发现某关键词重复率>50%，降低其优先级
# 如果发现某地域评论质量高，增加该地区关键词
# 如果获取速度过快(触发限制)，降低频率
```

---

## 📊 预期效果对比

| 指标 | 旧策略 | 新策略 | 提升 |
|------|--------|--------|------|
| 请求次数 | 40个关键词 | 20个智能词 | **-50%** |
| 数据重复率 | 60% | <20% | **-67%** |
| 高质量帖子占比 | 30% | 70% | **+133%** |
| 餐厅覆盖率 | 头部50家 | 头部+小众100家 | **+100%** |
| 价格信息获取 | 5%帖子 | 25%帖子 | **+400%** |

---

## 🚀 实施建议

### Phase 1: 立即执行 (今天)
1. 用 Priority 1 关键词搜索 (10个词)
2. 深度处理这些帖子的评论区
3. 提取新发现的餐厅名称作为下一轮搜索词

### Phase 2: 本周内
1. 实施用户追踪：找到5个高质量美食博主
2. 获取他们的历史帖子
3. 建立"餐厅别名映射表"

### Phase 3: 持续优化
1. 每周用"最近"筛选词更新数据
2. 每月用负面词(踩雷/避雷)补充避坑信息
3. 根据已获取数据，动态调整关键词优先级

---

**结论**: 用"精准场景+递归发现+时间维度"替代"宽泛批量搜索", 可显著提升数据质量和获取效率。🎩