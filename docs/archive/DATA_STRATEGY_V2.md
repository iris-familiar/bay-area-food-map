# 湾区美食地图 - 完整数据策略 V2.0

## 🎯 目标
从21家种子餐厅扩展到100+家湾区亚洲餐厅

---

## 📊 四大数据来源

### 1. 通用地域搜索 (主力发现渠道)
**策略**: 用宽泛地域词搜索，AI筛选亚洲餐

```
搜索词示例:
- "Cupertino美食" (高优先级 - 华人聚集)
- "Fremont美食" (高优先级)
- "Milpitas美食" (高优先级)
- "Mountain View美食"
- "南湾美食" / "东湾美食"

筛选规则:
✅ 包含: 中餐/日料/韩餐/东南亚/印度等82个亚洲标签
❌ 排除: 意大利/墨西哥/法餐等38个非亚洲标签

预期产出: 40-60家新餐厅
```

### 2. 评论区递归挖掘 (高效补充)
**策略**: 从已有帖子评论区提取新餐厅

```
提取模式:
- "XXX也不错" → 发现竞品
- "推荐你去XXX" → 发现推荐
- "还是XXX好吃" → 发现对比

已发现候选 (待验证):
- 川菜: 冯校长、香小馆、Chef Zhao
- 上海菜: Sifu Wong、外婆家常菜  
- 国际: Ettan(印度)、Khao Tiew(泰国)
- 烘焙: Ariscault Bakery、Milk Belly Bakery

预期产出: 15-20家
```

### 3. 餐厅深度追踪 (质量提升)
**策略**: 对已有餐厅进行递归搜索，获取更多评价

```
搜索模板 (必须加"湾区"限定):
- "湾区 {餐厅名}"
- "湾区 {餐厅名} 怎么样"
- "湾区 {餐厅名} 踩雷/避雷"
- "湾区 {餐厅名} 人均"

优先级:
🔥 热门餐厅 (5+来源/100+互动) → 3天更新
📊 中等餐厅 (3-4来源) → 7天更新  
❓ 数据不足 (<2来源) → 1天更新
🟢 稳定餐厅 (5+来源稳定) → 14天更新

预期产出: 丰富现有21家的数据维度
```

### 4. 场景化搜索 (精准覆盖)
**策略**: 针对特定场景/需求搜索

```
场景词示例:
- "湾区约会餐厅" → 环境好的餐厅
- "湾区家庭聚餐" → 适合带娃/多人
- "湾区一人食" → 快餐/简餐
- "湾区夜宵" → 深夜营业
- "湾区川菜天花板" → 细分品类头部
- "湾区踩雷避雷" → 负面评价

执行: 每周轮换3-5个场景词
```

---

## 🛡️ 去重与质量控制

### 三层去重
1. **Post ID** - 唯一标识去重
2. **内容Hash** - MD5(title+content)去重
3. **相似度检测** - 85%+相似度合并

### 抓取限制 (防封)
```yaml
每日限额:
  max_posts: 50        # 每天最多50新帖子
  max_requests: 30     # 最多30次搜索
  max_restaurants: 10  # 深度追踪10家

间隔控制:
  请求间隔: 8-12秒 (随机)
  餐厅切换: 30秒
  错误退避: 60s→120s→300s
  日满冷却: 1小时
```

### 湾区验证
所有搜索必须:
- ✅ 搜索词包含"湾区"或具体城市
- ✅ 结果验证包含湾区地标词
- ✅ Google Maps确认湾区地址

---

## 📈 执行计划

### Phase 1: 基础建设 (第1周)
- [x] 完成21家种子餐厅数据
- [x] 建立去重数据库
- [x] 生成通用地域搜索计划 (19个词)
- [ ] 执行Cupertino/Fremont/Milpitas搜索

### Phase 2: 快速扩展 (第2-4周) 
- [ ] 完成剩余16个地域搜索
- [ ] 评论区挖掘 (预计发现15-20家)
- [ ] 高优先级餐厅深度追踪

### Phase 3: 质量提升 (第5-8周)
- [ ] 场景化搜索轮换
- [ ] 全量餐厅递归更新
- [ ] 语义标签补全

**目标**: 8周内达到100家亚洲餐厅

---

## 🤖 自动化工具

| 工具 | 功能 | 位置 |
|------|------|------|
| `fetch_xiaohongshu_data.sh` | 基础数据抓取 | scripts/ |
| `discover_from_comments.py` | 评论区挖掘 | scripts/ |
| `asian_restaurant_discovery.py` | 地域搜索计划生成 | scripts/ |
| `generate_recursive_search.py` | 递归搜索计划 | scripts/ |
| `build_semantic_index.py` | 语义标签构建 | scripts/ |
| `fetch_scheduler.py` | 调度与去重 | scripts/ |

---

## 📊 成功指标

| 指标 | 当前 | 目标 | 时间 |
|------|------|------|------|
| 餐厅数量 | 21 | 100 | 8周 |
| 平均数据来源 | 2.5 | 4+ | 持续 |
| 数据重复率 | - | <10% | 持续 |
| 语义标签覆盖率 | 100% | 100% | 已完成 |

