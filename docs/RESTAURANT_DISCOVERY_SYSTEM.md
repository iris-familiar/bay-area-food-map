# 新餐厅发现系统 (Restaurant Discovery System)

## 🎯 目标
持续发现湾区新餐厅，从当前21家扩展到100+家

---

## 🔍 发现渠道 (6大来源)

### 1. 评论区挖掘 (最高效)
**原理**: 用户在评论区会提到其他餐厅

```python
# 从已有帖子的评论中提取
patterns = [
    r"(.{2,10})[也还]不错",      # "香锅大王也不错"
    r"推荐[你去]*(.{2,10})",      # "推荐你去塔里木"
    r"(.{2,10})更好[吃点]",       # "还是留湘更好吃"
    r"比起(.{2,10})",            # "比起王家味"
    r"(.{2,10})怎么样",          # "顾湘怎么样？"
    r"(.{2,10})和(.{2,10})["     # "香锅大王和顾湘哪个好"
]

# 过滤条件:
# - 必须是中文/英文餐厅名 (2-10字)
# - 不包含停用词 ("我家", "这里", "那边")
# - 搜索结果必须包含湾区地标验证
```

**预期产出**: 每10个帖子可发现2-3个新餐厅

---

### 2. 美食博主追踪 (最精准)
**原理**: 专业博主会持续探新店

```python
# 识别高质量博主特征:
high_quality_author = {
    "followers": ">500",
    "avg_likes": ">50",
    "food_ratio": ">70%",  # 70%内容是美食
    "posting_freq": "1-3篇/周",
    "location": "湾区/SF/Bay Area"
}

# 追踪内容:
# 1. 历史帖子 (过去6个月)
# 2. 收藏夹 (他们收藏的餐厅)
# 3. 关注列表 (同类博主扩散)
```

**种子博主发现**:
- 从现有21家餐厅的数据中提取作者
- 筛选出高质量作者作为种子
- 追踪他们的新帖子

---

### 3. 场景化搜索 (最全面)
**原理**: 用场景词覆盖不同类型餐厅

```python
scene_keywords = {
    # 用餐场景
    "湾区约会餐厅": "发现环境好的餐厅",
    "湾区生日聚餐": "发现适合聚会的大餐厅",
    "湾区商务宴请": "发现高端中餐",
    "湾区家庭聚餐": "发现适合带娃的餐厅",
    "湾区一人食": "发现快餐/简餐",
    "湾区夜宵": "发现深夜营业餐厅",
    
    # 特定需求
    "湾区早茶": "发现粤式茶餐厅",
    "湾区火锅": "发现火锅/麻辣烫",
    "湾区烧烤": "发现烤串/烤肉",
    "湾区面馆": "发现兰州拉面/日式拉面",
    "湾区甜品": "发现奶茶店/甜品店",
    "湾区素食": "发现素食餐厅",
    
    # 地域细分
    "Cupertino餐厅": "南湾具体区域",
    "Fremont美食": "东湾具体区域",
    "Palo Alto dining": "半岛高端区",
    "SF Chinatown": "旧金山唐人街",
    "Milpitas新店": "新店速递",
}
```

**执行策略**: 每周轮换3-5个场景词，避免重复

---

### 4. 新店追踪 (最新鲜)
**原理**: 专门发现新开业的餐厅

```python
new_restaurant_keywords = [
    "湾区新店",
    "湾区新开",
    "湾区探店",
    "湾区新店速递",
    "湾区soft opening",
    "湾区coming soon",
    "湾区grand opening",
    "湾区餐厅 试营业",
]

# 时间筛选: 只搜最近1个月的内容
```

**验证方法**:
- 搜索确认Google Maps上review数量<20
- 或标注"新店"、"刚开"

---

### 5. 竞品对比 (最深度)
**原理**: 对比类帖子会提及多个餐厅

```python
comparison_patterns = [
    "湾区川菜对比",
    "湾区湘菜哪家强",
    "湾区火锅排名",
    "湾区日料推荐",
    "湾区中餐天花板",
    "湾区烧烤评测",
    "湾区早茶盘点",
]

# 这类帖子通常会列出5-10家餐厅进行对比
# 一次可发现多个新餐厅
```

---

### 6. 跨平台补充 (最广泛)
**原理**: 不同平台用户群体不同

```python
platforms = {
    "xiaohongshu": "年轻女性，颜值导向",
    "yelp": "本地美国人，评分导向",
    "google_maps": "真实评价，数量多",
    "wechat_groups": "华人社区，口碑传播",
    "chowbus": "外卖用户，效率导向",
    "doordash": "外卖数据，热门餐厅",
}

# 策略:
# - 小红书为主 (当前项目)
# - Google Maps验证 (地址/评分)
# - Yelp补充 (英文评价)
```

---

## 📈 发现流程设计

### 每日任务 (自动化)
```
09:00 - 检查种子博主的更新
10:00 - 评论区挖掘 (处理昨天抓取的数据)
11:00 - 1个场景化搜索词
14:00 - 1个新店追踪词
16:00 - 1个对比类搜索词
```

### 每周任务 (半自动化)
```
周一 - 更新博主列表 (发现新博主)
周三 - 轮换场景关键词
周五 - 汇总本周发现的新餐厅
周日 - 人工审核候选餐厅
```

### 每月任务 (人工参与)
```
第1周 - 深度分析高优先级餐厅
第2周 - 执行递归搜索 (基于现有餐厅)
第3周 - 跨平台数据补充
第4周 - 生成月度发现报告
```

---

## 🎯 优先级排序

新发现的餐厅不立即抓取，按优先级排队：

```python
priority_score = (
    mention_count * 3 +        # 被提及次数
    mention_quality * 2 +      # 提及质量 (正面/详细)
    author_influence * 2 +     # 提及者影响力
    uniqueness * 1 +           # 独特性 (菜系/区域)
    recency * 1                # 时效性 (新店加分)
)

# 只抓取priority_score > 阈值 的餐厅
```

---

## 📊 预期产出

| 渠道 | 每周发现 | 质量 | 成本 |
|------|---------|------|------|
| 评论区挖掘 | 5-10家 | 高 | 低 |
| 博主追踪 | 3-5家 | 高 | 中 |
| 场景搜索 | 5-8家 | 中 | 低 |
| 新店追踪 | 2-3家 | 高 | 低 |
| 对比帖子 | 3-5家 | 高 | 中 |
| **总计** | **18-31家/周** | - | - |

**目标**: 2个月内从21家扩展到100家

---

## 🔧 技术实现

### 新餐厅候选池
```python
candidate_pool = {
    "restaurant_name": {
        "discovery_source": "评论区/博主/搜索",
        "mention_count": 3,
        "first_seen": "2026-02-15",
        "priority_score": 85,
        "status": "pending",  # pending/verified/scheduled/fetched
        "verification_notes": ""
    }
}
```

### 自动验证流程
```python
def verify_candidate(name):
    # 1. Google Maps搜索验证是否存在
    # 2. 检查是否已存在于数据库
    # 3. 检查湾区相关性
    # 4. 生成优先级分数
    # 5. 加入待抓取队列
```

---

## 🚨 质量控制

### 避免虚假发现
```python
# 过滤条件:
- 必须能在Google Maps找到
- 地址必须在湾区范围内
- 至少有2个独立来源提及
- 排除连锁店 (除非本地特色店)
```

### 去重机制
```python
# 餐厅名标准化:
"王家味" = "Wang Jia Wei" = "Wang's Kitchen"
# 使用模糊匹配 + 地址匹配
```

---

## 📋 实施清单

### 立即执行 (今天)
- [ ] 从现有21家的评论区提取候选
- [ ] 识别5个高质量种子博主
- [ ] 创建候选池数据库

### 本周完成
- [ ] 实现评论区挖掘脚本
- [ ] 实现博主追踪脚本
- [ ] 设置3个场景搜索词
- [ ] 生成第一批10-15个候选餐厅

### 本月目标
- [ ] 候选池达到50家
- [ ] 验证并抓取20家新餐厅
- [ ] 总数达到41家

---

## 💡 关键洞察

**为什么21家只是开始？**

湾区华人餐厅生态：
- 湘菜: 估计15-20家 (现有3家)
- 川菜: 估计20-30家 (现有2家)
- 日料: 估计50+家 (现有3家)
- 火锅: 估计20-30家 (现有2家)
- 早茶: 估计15-20家 (现有0家)
- 其他菜系: 估计30+家

**总计**: 湾区适合华人/留学生的餐厅估计有 **150-200家**

当前21家只覆盖了 **10-15%**，还有巨大挖掘空间！

---

**下一步**: 要我执行评论区挖掘，从现有数据中发现第一批新餐厅候选吗？
